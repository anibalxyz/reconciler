package com.anibalxyz.server.config.environment;

import com.anibalxyz.features.auth.api.env.AuthApiEnvironment;
import com.anibalxyz.features.auth.application.env.AuthEnvironment;
import com.anibalxyz.features.auth.application.env.JwtEnvironment;
import com.anibalxyz.features.auth.application.env.RefreshTokenEnvironment;
import com.anibalxyz.features.users.application.env.UsersEnvironment;
import com.anibalxyz.server.config.AppEnv;
import com.anibalxyz.server.config.modules.startup.ServerEnvironment;
import io.javalin.http.SameSite;
import java.time.Duration;
import javax.crypto.SecretKey;

/**
 * A concrete implementation that holds all application-level environment variables.
 *
 * <p>This record provides a type-safe, immutable representation of settings loaded from the
 * environment (e.g., .env files or system variables), acting as the single source of truth for
 * configuration. It implements various {@code ...Environment} interfaces to provide decoupled,
 * feature-specific configurations to different parts of the application.
 *
 * @param APP_ENV The current application environment (e.g., "dev", "test", "prod").
 * @param SERVER_URL The base URL of the server (e.g., "<a href="http://localhost:4001">...</a>").
 * @param API_URL The base URL of the API (e.g., "<a href="http://localhost:4001/api">...</a>").
 * @param API_PORT The port the API is running on.
 * @param API_PREFIX The prefix for all API routes (e.g., "/api").
 * @param CORS_ALLOWED_ORIGINS An array of allowed origins for CORS.
 * @param CONTACT_EMAIL The contact email for the API documentation.
 * @param BCRYPT_LOG_ROUNDS The computational cost for the BCrypt password hashing algorithm.
 * @param JWT_SECRET The secret key for signing JWTs.
 * @param JWT_KEY The {@link SecretKey} instance derived from the JWT_SECRET.
 * @param JWT_ISSUER The issuer name for JWTs.
 * @param JWT_ACCESS_EXPIRATION_TIME_MINUTES The expiration time for access tokens in minutes.
 * @param JWT_REFRESH_EXPIRATION_TIME_DAYS The expiration time for refresh tokens in days.
 * @param AUTH_COOKIE_SECURE Whether the refresh token cookie should be marked as secure.
 * @param AUTH_COOKIE_DOMAIN The domain for the refresh token cookie.
 * @param AUTH_COOKIE_SAMESITE The SameSite policy for the refresh token cookie.
 * @param AUTH_COOKIE_PATH The path for the refresh token cookie.
 * @param AUTH_ENABLE_TIME_WINDOW Whether to enable the time-window for authentication.
 * @author Generated by AI
 */
public record AppEnvironmentSource(
    AppEnv APP_ENV,
    String SERVER_URL,
    String API_URL,
    int API_PORT,
    String API_PREFIX,
    String[] CORS_ALLOWED_ORIGINS,
    String CONTACT_EMAIL,
    int BCRYPT_LOG_ROUNDS,
    String JWT_SECRET,
    SecretKey JWT_KEY,
    String JWT_ISSUER,
    long JWT_ACCESS_EXPIRATION_TIME_MINUTES,
    Duration JWT_REFRESH_EXPIRATION_TIME_DAYS,
    Boolean AUTH_COOKIE_SECURE,
    String AUTH_COOKIE_DOMAIN,
    SameSite AUTH_COOKIE_SAMESITE,
    String AUTH_COOKIE_PATH,
    boolean AUTH_ENABLE_TIME_WINDOW)
    implements UsersEnvironment,
        ServerEnvironment,
        JwtEnvironment,
        RefreshTokenEnvironment,
        AuthApiEnvironment,
        AuthEnvironment {}
